function menuAction(e){var t=e.parentNode.parentNode;t.className="lowerScreen",t.setAttribute("style","overflow:hidden"),t.innerHTML=t.innerHTML+'<div id="cover" onclick="menuClose(this,testMe)"></div>'}function testMe(e){setTimeout(function(){e.setAttribute("style","")},600)}function menuClose(e,t){var n=e.parentNode;n.className="",e.remove(),t(n)}function triggerView(e){var e=e,t=document.querySelectorAll("article.current")[0],n=document.getElementsByClassName(e),o=document.querySelectorAll("li.current")[0],s=document.querySelectorAll("li#"+e)[0];void 0!==o&&(o.classList.remove("current"),s.classList.add("current"));for(var a=document.getElementsByClassName("button-main"),c=0;c<a.length;++c){var r=a[c];r.className=r.className+" hide"}setTimeout(function(){expandView(e,n,t)},500)}function expandView(e,t,n){var o=document.getElementById("expand"),n=n,t=t;o.className=o.className+" fullScreen",viewFadeOut(o,t,n);var s=document.getElementById("cover");menuClose(s,testMe)}function viewFadeOut(e,t,n){var o=e,t=t,n=n;console.log(t),t=t[0],console.log(t),setTimeout(function(){o.className=o.className+" reverse";for(var e=document.getElementsByClassName("button-main"),s=0;s<e.length;++s){var a=e[s];a.className="button-main"}n.classList.remove("current"),n.classList.add("off"),t.classList.remove("off"),t.className=t.className+" current"},1e3),setTimeout(function(){o.className="expand-circle"},1400)}function triggerPopup(e){document.getElementById("popup").className="show",document.querySelectorAll("body").setAttribute("style","overflow:hidden")}function closePopup(){document.getElementById("popup").className="",document.querySelectorAll("body").setAttribute("style","")}function getUser(e){var t="";t=e&&""!=e?"http://dcp3451-test.apigee.net/mydeals/users?fields="+e:"http://dcp3451-test.apigee.net/mydeals/users",app.controller("userProfileController",["$scope","$http",function(e,n){n.get(t).success(function(t,n,o,s){e.fname=t.fname,e.lname=t.lname,e.fullname=function(){return e.fname+" "+e.lname},e.photo=t.picture,e.points=t.pt_total,uId=t.uuid}).error(function(e,t,n,o){})}])}function getOpenDeals(e){var t="";t=e&&""!=e?"http://dcp3451-test.apigee.net/mydeals/deals?fields="+e:"http://dcp3451-test.apigee.net/mydeals/deals",app.controller("availableDealsController",["$scope","$http",function(e,n){n.get(t).success(function(t,n,o,s){e.items=t}).error(function(e,t,n,o){})}])}function categoryProduct(e){var t="http://dcp3451-test.apigee.net/mydeals/products?category="+e;console.log("apiurl"+t),app.controller("categoryProductController",["$scope","$http",function(e,n){n.get(t).success(function(t,n,o,s){console.log("yes:"+n),e.photo=t.MainImageUrl,e.desc=t.DescriptionName}).error(function(e,t,n,o){console.log("no:"+t)})}])}var app={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){function e(){return!1}app.receivedEvent("deviceready"),nfc.addNdefListener(function(e){var t=e.tag,n=t.ndefMessage,o=nfc.bytesToHexString(t.id);alert(o);var s="app/searshack",a="You won a coupon!",c=ndef.mimeMediaRecord(s,nfc.stringToBytes(a));nfc.write([c],function(){alert("success")},function(e){alert("fail")})},function(){console.log("Waiting for NDEF tags")},function(e){console.log("Error adding NDEF listener "+JSON.stringify(e))}),nfc.addMimeTypeListener("app/searshack",function(e){var t=e.tag,n=t.ndefMessage,o=nfc.bytesToString(n[0].payload).substring(0),s=nfc.bytesToHexString(t.id);document.getElementById("nfc-value").innerHTML="500",document.getElementById("nfc-id").innerHTML="tag-ID="+s},function(){console.log("listening for MIME NDEF tags")},function(e){console.log("Error registering MIME NDEF listener "+e)}),document.addEventListener("backbutton",e,!1)},receivedEvent:function(e){}},addRippleEffect=function(e){var t=e.target;if("button"!==t.tagName.toLowerCase())return!1;var n=t.getBoundingClientRect(),o=t.querySelector(".ripple");o||(o=document.createElement("span"),o.className="ripple",o.style.height=o.style.width=Math.max(n.width,n.height)+"px",t.appendChild(o)),o.classList.remove("show");var s=e.pageY-n.top-o.offsetHeight/2-document.body.scrollTop,a=e.pageX-n.left-o.offsetWidth/2-document.body.scrollLeft;o.style.top=s+"px",o.style.left=a+"px",o.classList.add("show");for(var c=document.getElementsByClassName("expand-circle"),r=e.pageY/2-document.body.scrollTop,l=e.pageX/2-document.body.scrollLeft,i=0;i<c.length;++i){var u=c[i];u.style.top=e.pageY+"px",u.style.left=e.pageX+"px"}return!1};document.addEventListener("click",addRippleEffect,!1),setTimeout(function(){var e=document.querySelectorAll("body.start")[0];e.classList.remove("start"),e.classList.add("started")},4e3);var app=angular.module("mydeals",[]),uId="";getUser("fname,lname,picture,pt_total,uuid,zip"),getOpenDeals("keyword,short_desc,pt_value");